const loremIpsum = ["lorem", "ipsum", "dolor", "sit", "amet", "consectetur", "adipiscing", "elit", "vestibulum", "a", "interdum", "mauris", "ac", "blandit", "nibh", "in", "tincidunt", "euismod", "massa", "vestibulum", "ultrices", "fringilla", "turpis", "vel", "pharetra", "augue", "maximus", "vitae", "duis", "id", "quam", "ullamcorper", "mattis", "dolor", "sit", "amet", "fermentum", "ligula", "sed", "finibus", "aliquet", "ante", "vitae", "malesuada", "duis", "non", "nulla", "quis", "magna", "elementum", "viverra", "donec", "quis", "sapien", "diam", "ut", "ac", "porta", "nisl", "donec", "molestie", "faucibus", "mauris", "sed", "fringilla", "proin", "ut", "ornare", "orci", "sed", "aliquam", "pulvinar", "lorem", "et", "pulvinar", "aliquam", "neque", "ligula", "fringilla", "et", "porttitor", "tempor", "imperdiet", "sed", "ex", "curabitur", "ullamcorper", "mauris", "ante", "vitae", "dignissim", "orci", "efficitur", "a", "etiam", "mollis", "elit", "lorem", "non", "aliquam", "mi", "cursus", "sed", "mauris", "eu", "erat", "vel", "augue", "cursus", "elementum", "curabitur", "ex", "dui", "sodales", "quis", "lacus", "non", "congue", "ultrices", "justo", "nullam", "condimentum", "varius", "mauris", "nec", "semper", "tellus", "interdum", "at", "aenean", "non", "ligula", "viverra", "iaculis", "orci", "ut", "consectetur", "odio", "quisque", "eget", "ipsum", "dictum", "auctor", "neque", "vitae", "hendrerit", "lacus", "pellentesque", "nec", "erat", "commodo", "dictum", "magna", "quis", "tristique", "metus", "vivamus", "commodo", "libero", "a", "fermentum", "consectetur", "cras", "a", "enim", "egestas", "ultrices", "sem", "quis", "dignissim", "odio", "phasellus", "rutrum", "velit", "eu", "laoreet", "vehicula", "curabitur", "at", "pellentesque", "ante", "in", "dignissim", "sodales", "euismod", "in", "accumsan", "faucibus", "arcu", "interdum", "pulvinar", "nam", "dignissim", "tempus", "augue", "sit", "amet", "blandit", "odio", "euismod", "sed", "quisque", "ornare", "vulputate", "est", "eget", "hendrerit", "fusce", "non", "venenatis", "nisi", "sed", "ornare", "nulla", "pellentesque", "tempor", "tortor", "quam", "nam", "sed", "nulla", "nisl", "aenean", "ex", "libero", "suscipit", "quis", "diam", "quis", "cursus", "efficitur", "magna", "vestibulum", "sed", "condimentum", "ex", "quisque", "ac", "tincidunt", "purus", "in", "hendrerit", "elit", "aliquam", "ac", "rhoncus", "sapien", "nullam", "luctus", "velit", "risus", "rhoncus", "finibus", "est", "venenatis", "vel", "fusce", "efficitur", "hendrerit", "tempus", "duis", "eget", "porta", "nisl", "sed", "tempor", "dui", "in", "non", "metus", "enim", "praesent", "efficitur", "rhoncus", "justo", "sed", "rutrum", "lectus", "finibus", "sed", "donec", "venenatis", "sit", "amet", "massa", "non", "malesuada", "pellentesque", "lobortis", "libero", "ut", "auctor", "efficitur", "orci", "enim", "cursus", "enim", "ut", "ornare", "ipsum", "purus", "sit", "amet", "tellus", "nullam", "a", "tellus", "quam", "nunc", "consectetur", "lectus", "nec", "urna", "iaculis", "in", "tempor", "sapien", "accumsan", "curabitur", "fermentum", "vestibulum", "arcu", "nec", "faucibus"];

ArrayProductes = [
        {
          "by":"admin",
          "nom": "AnyDesk",
          "categoria": "RemoteControl",
          "descripcio": "AnyDesk is a closed source remote desktop application distributed by AnyDesk Software GmbH. The proprietary software program provides platform independent remote access to personal computers and other devices running the host application.",
          "requirements": {
            "OS": "Any",
            "CPU": "Intel Pentium",
            "RAM": "1 GB",
            "Storage": "512 MB",
            "GraphicCard": "-"
          },
          "logo": "img/AnyDesk/logo.jpg",
          "slides": [
            "img/AnyDesk/slide1.png",
            "img/AnyDesk/slide2.jpg",
            "img/AnyDesk/slide3.png",
            "img/AnyDesk/slide4.png"
          ]
        },
        {
          "by":"admin",
          "nom": "Audacity",
          "categoria": "Media and Streaming",
          "descripcio": "Audacity is a free, open source, cross-platform multi-track audio editor and recorder for Windows, Mac OS X, GNU/Linux and other operating systems. Audacity can record live audio through a microphone or mixer, or digitize recordings from cassette tapes, records or minidiscs.",
          "requirements": {
            "OS": "Any",
            "CPU": "Intel Pentium",
            "RAM": "1 GB",
            "Storage": "1 GB",
            "GraphicCard": "-"
          },
          "logo": "img/Audacity/logo.png",
          "slides": [
            "img/Audacity/slide1.png",
            "img/Audacity/slide2.png",
            "img/Audacity/slide3.jfif"
          ]
        },
        {
          "by":"admin",
          "nom": "Camtasia Studio",
          "categoria": "Media and Streaming",
          "descripcio": "Camtasia is a software suite, created and published by TechSmith, for creating and recording video tutorials and presentations directly via screencast, or via a direct recording plug-in to Microsoft PowerPoint.",
          "requirements": {
            "OS": "Any",
            "CPU": "Intel i3",
            "RAM": "4 GB",
            "Storage": "1 GB",
            "GraphicCard": "DirectX10 needed"
          },
          "logo": "img/Camtasia/logo.jpg",
          "slides": [
            "img/Camtasia/slide1.png",
            "img/Camtasia/slide2.png",
            "img/Camtasia/slide3.jpg"
          ]
        },
        {
          "by":"admin",
          "nom": "Filmora",
          "categoria": "Media and Streaming",
          "descripcio": "Filmora is a popular video editing tool intended for users who want to concentrate on editing and making high-quality videos. The software offers editing support for 4K videos. It's an affordable product equipped with tools made for both video and audio. It gives users a plethora of options when it comes to styling, adding effects, and customizing videos. The tool makes it possible for users to throw in overlays, come up with animations and elements, add audio, and insert texts. It's an ideal tool to have especially for those who want to make dedications, tributes, and stories in their videos. Voice overs can also be included in any video.",
          "requirements": {
            "OS": "Any",
            "CPU": "Intel i3",
            "RAM": "4 GB",
            "Storage": "1 GB",
            "GraphicCard": "DirectX10 needed"
          },
          "logo": "img/Filmora/logo.png",
          "slides": [
            "img/Filmora/slide1.jpg",
            "img/Filmora/slide2.jpg",
            "img/Filmora/slide3.jpg"
          ]
        },
        {
          "by":"admin",
          "nom": "GIMP",
          "categoria": "Image edition",
          "descripcio": "GIMP is an acronym for GNU Image Manipulation Program. It is a freely distributed program for such tasks as photo retouching, image composition and image authoring. ... The advanced scripting interface allows everything from the simplest task to the most complex image manipulation procedures to be easily scripted.",
          "requirements": {
            "OS": "Any",
            "CPU": "Intel Pentium",
            "RAM": "1 GB",
            "Storage": "1 GB",
            "GraphicCard": "DirectX10"
          },
          "logo": "img/Gimp/logo.png",
          "slides": [
            "img/Gimp/slide1.jpg",
            "img/Gimp/slide2.jpg",
            "img/Gimp/slide3.jpg"
          ]
        },
        {
          "by":"admin",
          "nom": "Google Chrome",
          "categoria": "Browsers",
          "descripcio": "Chrome is a free Internet browser officially released by Google on December 11, 2008. Its features include synchronization with Google services and accounts, tabbed browsing, and automatic translation and spell check of web pages. It also features an integrated address bar/search bar, called the omnibox.",
          "requirements": {
            "OS": "Any",
            "CPU": "Intel Pentium",
            "RAM": "1 GB",
            "Storage": "512 MB",
            "GraphicCard": "-"
          },
          "logo": "img/Chrome/logo.png",
          "slides": [
            "img/Chrome/slide1.jpg",
            "img/Chrome/slide2.png",
            "img/Chrome/slide3.jpg"
          ]
        },
        {
          "by":"admin",
          "nom": "Microsoft Edge",
          "categoria": "Browsers",
          "descripcio": "Microsoft Edge is the browser created for Windows 10; Edge replaces Internet Explorer (IE), the browser that debuted with Windows 95 and was a part of Windows operating systems for the following two decades. Edge is a smaller, more streamlined browser built on Web standards and designed for Web services.",
          "requirements": {
            "OS": "Any",
            "CPU": "Intel Pentium",
            "RAM": "1 GB",
            "Storage": "512 MB",
            "GraphicCard": "-"
          },
          "logo": "img/Edge/logo.png",
          "slides": [
            "img/Edge/slide1.jpg",
            "img/Edge/slide2.jpg",
            "img/Edge/slide3.png"
          ]
        },
        {
          "by":"admin",
          "nom": "Mozilla Firefox",
          "categoria": "Browsers",
          "descripcio": "Mozilla Firefox is a free web browser that will allow you to access the web. It's an Open Source alternative to Microsoft's Internet Explorer and has a wide variety of plugins available to allow you to customize it further. Mozilla Firefox can be downloaded for free at Firefox.com.",
          "requirements": {
            "OS": "Any",
            "CPU": "Intel Pentium",
            "RAM": "1 GB",
            "Storage": "512 MB",
            "GraphicCard": "-"
          },
          "logo": "img/Firefox/logo.jpg",
          "slides": [
            "img/Firefox/slide1.png",
            "img/Firefox/slide2.jpg",
            "img/Firefox/slide3.jpg"
          ]
        },
        {
          "by":"admin",
          "nom": "Open Broadcast Software",
          "categoria": "Media and Streaming",
          "descripcio": "OBS Studio is a free and open-source app for screencasting and live streaming. Written in C/C++ and built with Qt, OBS Studio provides real-time capture, scene composition, recording, encoding, and broadcasting via the Real Time Messaging Protocol (RTMP).",
          "requirements": {
            "OS": "Any",
            "CPU": "AMD FX / Intel i5",
            "RAM": "4 GB",
            "Storage": "1 GB",
            "GraphicCard": "Compatible with DirectX10"
          },
          "logo": "img/OBS/logo.jpg",
          "slides": [
            "img/OBS/slide1.png",
            "img/OBS/slide2.jfif",
            "img/OBS/slide3.jpg"
          ]
        },
        {
          "by":"admin",
          "nom": "Photoshop",
          "categoria": "Image edition",
          "descripcio": "Photoshop is Adobe's photo editing, image creation and graphic design software. The software provides many image editing features for raster (pixel-based) images as well as vector graphics. It uses a layer-based editing system that enables image creation and altering with multiple overlays that support transparency.",
          "requirements": {
            "OS": "Any",
            "CPU": "Intel i5",
            "RAM": "4 GB",
            "Storage": "1 GB",
            "GraphicCard": "DirectX10"
          },
          "logo": "img/Photoshop/logo.png",
          "slides": [
            "img/Photoshop/slide1.jpg",
            "img/Photoshop/slide2.jfif",
            "img/Photoshop/slide3.jpg"
          ]
        },
        {
          "by":"admin",
          "nom": "TeamViewer",
          "categoria": "RemoteControl",
          "descripcio": "TeamViewer is remote access and remote control computer software, allowing maintenance of computers and other devices. It was first released in 2005, and its functionality has expanded step by step.TeamViewer is proprietary software, but does not require registration and is free of charge for non-commercial use. It has been installed on more than two billion devices. TeamViewer is the core product of developer TeamViewer AG.",
          "requirements": {
            "OS": "Any",
            "CPU": "Intel Pentium",
            "RAM": "2 GB",
            "Storage": "1 GB",
            "GraphicCard": "-"
          },
          "logo": "img/TeamViewer/logo.png",
          "slides": [
            "img/TeamViewer/slide1.jpg",
            "img/TeamViewer/slide2.png",
            "img/TeamViewer/slide3.png"
          ]
        }
];

//FunciÃ³ per generar contingut aleatori i que sigui una mica diferent
function randomIpsum(min, max){
    var mida=randomInt(min,max);
    var m=loremIpsum.length-mida;
    var inici=randomInt(0,m);
    var str="";
    for(var i=0;i<mida;i++)
        str+=loremIpsum[inici+i]+" ";
    str=str.trim();
    return str.charAt(0).toUpperCase() + str.slice(1);
}

function href(lloc){
    window.location.href = lloc;
}

function randomInt(min, max){
    return Math.floor(Math.random() * (max+1 - min) + min);
}

function crearPopup(textPrincipal, textSecundari, textFinal, colorPopup){
    //Fons negre amb opacitat
    var background = document.createElement('div');
    background.setAttribute('id', 'popup');

    //Contenidor del popup
    var contenidorPopup = document.createElement('div');
    contenidorPopup.setAttribute("style","background-color:"+colorPopup);
    
    //Text gran1
    var textPrin = document.createElement('h1');
    textPrin.innerText = textPrincipal;

    //Text info
    var textSec = document.createElement('h2');
    textSec.innerText = textSecundari;

    //Text gran 2
    var textFi = document.createElement('h1');
    textFi.innerText = textFinal;

    //Tancar pupup
    var tancar = document.createElement('p');
    tancar.innerText = "CLOSE";
    tancar.setAttribute("style","clickable");
    tancar.setAttribute("onClick","treurePopup()");

    //Crea element complet
    contenidorPopup.appendChild(textPrin);
    contenidorPopup.appendChild(textSec);
    contenidorPopup.appendChild(textFi);
    contenidorPopup.appendChild(tancar);
    background.appendChild(contenidorPopup);

    //Afegeix al body
    document.body.appendChild(background);

    //Afegim timeout de 15s per si no tanca el popup que es tanqui sol
    setTimeout(function() { treurePopup(); }, 15000);  
}

function popupPregunta(pregunta,funcioOk){
  //Fons negre amb opacitat
  var background = document.createElement('div');
  background.setAttribute('id', 'popup');

  //Contenidor del popup
  var contenidorPopup = document.createElement('div');
  contenidorPopup.setAttribute("style","background-color:#ffe5ac");
  
  //Text gran1
  var textPrin = document.createElement('h1');
  textPrin.innerText = pregunta;


  //Tancar pupup
  var tancarY = document.createElement('p');
  tancarY.innerText = "YES";
  tancarY.setAttribute("style","clickable");
  tancarY.setAttribute("onClick",funcioOk);
  var tancar = document.createElement('p');
  tancar.innerText = "NO";
  tancar.setAttribute("style","clickable");
  tancar.setAttribute("onClick","treurePopup()");

  //Crea element complet
  contenidorPopup.appendChild(textPrin);
  contenidorPopup.appendChild(tancarY);
  contenidorPopup.appendChild(tancar);
  background.appendChild(contenidorPopup);

  //Afegeix al body
  document.body.appendChild(background);
}

function logout(){
  localStorage.removeItem("usr");
  treurePopup()
  setTimeout(function() { window.location.reload() }, 300);  
}

function treurePopup(){
    var popup =document.getElementById("popup");
    if(popup!=null){
        popup.style.opacity=0;
        popup.style.animation= "fadeOut normal 1s ease-in-out";
        setTimeout(function() { treureCompletPopup(popup); }, 1000);  
    }
}

function treureCompletPopup(popup){
    document.body.removeChild(popup);
}

function carregarProductes(){
  let copiaLocal = localStorage.getItem("productes");
  if(copiaLocal!=null)
    ArrayProductes = JSON.parse(copiaLocal);
}

function loginRestricted(){
  if(!checkLogin(false))
    window.location="index.html";
}

function benvingut(){
    //Fons negre amb opacitat
    var background = document.createElement('div');
    background.setAttribute('id', 'popup');
  
    //Contenidor del popup
    var contenidorPopup = document.createElement('div');
    contenidorPopup.setAttribute("style","background-color:#ffe5ac; min-width: 430px");
    
    //Text gran1
    var textPrin = document.createElement('h1');
    textPrin.innerText = "Welcome!";

    var textSecn = document.createElement('h4');
    textSecn.setAttribute("style","text-align: justify; font-weight: bold");
    textSecn.innerHTML = "I see that this is your first time visiting the website. Thats good!<br>Please, read the README.txt file in the root directory in order to unlock all website capabilities or visit ABOUT section for a quick overview.<br>This website hides functionalites for non logged in users so try to make your own account (or read the README file ðŸ˜‰)";

    var warn = document.createElement('em');
    warn.innerText="This website uses local storage to perform its demo. By using this website you agree to give us premission to use local storage.";
    var checkLlegit = document.createElement('label');
    checkLlegit.innerHTML='<br><input type="checkbox" id="check"> This missage will appear until I read it.';

    //Tancar pupup
    var tancar = document.createElement('p');
    tancar.innerText = "CLOSE";
    tancar.setAttribute("style","clickable");
    tancar.setAttribute("onClick","llegeixme()");
  
    //Crea element complet
    contenidorPopup.appendChild(textPrin);
    contenidorPopup.appendChild(textSecn);
    contenidorPopup.appendChild(warn);
    contenidorPopup.appendChild(checkLlegit);
    contenidorPopup.appendChild(tancar);
    background.appendChild(contenidorPopup);
  
    //Afegeix al body
    document.body.appendChild(background);
}

function llegeixme(){
  if(document.getElementById("check").checked)//ho ha llegit
    localStorage.setItem("firstLogin","false");
  treurePopup();
}

function checkLogin(otherPage=true){
  if(localStorage.getItem("firstLogin")==null){//Comprova el primer inici per donar missatge de benvinguda
    benvingut();
  }
  //localStorage.clear();
  carregarProductes();
  let login = document.getElementById("login");
  let usr = localStorage.getItem("usr");
  logged=false;
  if(usr!=null){//Logged in
    logged=true;
    login.innerText=usr;
    login.setAttribute("onclick","popupPregunta('Logout?','logout()')");
    let manage = document.createElement("h3");
    if(otherPage)
      manage.className="fesClick";
    else
    manage.className="fesClick seleccionat";
    manage.setAttribute("onclick","href('manage.html')");
    manage.innerText="MANAGE";
    let browser = document.getElementById("brows");
    browser.parentNode.insertBefore(manage, browser.nextSibling);
  } else{
    login.setAttribute("onclick","href('login.html?href="+encodeURIComponent(window.location.href)+"')");
  }
  return logged;
}
let usuaris =
  {
    "admin": "admin", //Key = usr , //Value = pass
  };

function obtenirUsuaris(){
  let usrs = localStorage.getItem("usuaris");
  if(usrs==null){
      usrs = usuaris;
      actualitzarUsuaris(usrs);
  }
  else
      usrs = JSON.parse(usrs);
  return usrs;
}

function actualitzarUsuaris(usrs){
  localStorage.setItem("usuaris", JSON.stringify(usrs));
}

